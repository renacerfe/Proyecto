async function simulateAIResponse() {
    const input = document.getElementById('user-input');
    const text = input.value.trim();
    if (!text) return;

    const chatBox = document.getElementById('chat-box');

    // Burbuja usuario
    const userBubble = document.createElement('div');
    userBubble.className = 'chat-bubble user';
    userBubble.innerText = text;
    chatBox.appendChild(userBubble);
    input.value = '';
    chatBox.scrollTop = chatBox.scrollHeight;

    // Burbuja IA
    const aiBubble = document.createElement('div');
    aiBubble.className = 'chat-bubble ai';
    aiBubble.innerText = "Escribiendo...";
    chatBox.appendChild(aiBubble);
    chatBox.scrollTop = chatBox.scrollHeight;

    try {
        const res = await fetch("https://TU-BACKEND.onrender.com/ia", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                text,
                name: localStorage.getItem('uName') || 'Estudiante'
            })
        });

        if (!res.ok) throw new Error("Error backend");

        const data = await res.json();
        const aiText = data.text || "No hubo respuesta.";

        // Efecto escritura (lo conservamos)
        aiBubble.innerText = "";
        let i = 0;
        const typing = setInterval(() => {
            aiBubble.innerText += aiText.charAt(i);
            chatBox.scrollTop = chatBox.scrollHeight;
            i++;
            if (i >= aiText.length) clearInterval(typing);
        }, 20);

    } catch (err) {
        console.error(err);
        aiBubble.innerText = "No pude conectarme con el servidor de sabidur√≠a.";
    }
}